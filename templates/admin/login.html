{% extends "admin/base.html" %}
{% load static %}

{% block bodyclass %}login{% endblock %}

{% block nav-sidebar %}{% endblock %}
{% block breadcrumbs %}{% endblock %}
{% block header %}{% endblock %}
{% block footer %}{% endblock %}
{% block userlinks %}{% endblock %}
{% block branding %}{% endblock %}

{% block extrastyle %}
{{ block.super }}
<link rel="stylesheet" href="{% static 'admin/css/base.css' %}">
<link rel="stylesheet" href="{% static 'admin/css/login.css' %}">

<style>
    html, body, #container, #main, #content-start {
        height: 100% !important;
        min-height: 100vh !important;
        margin: 0 !important;
        padding: 0 !important;
    }

    body.login {
        background: linear-gradient(135deg, #0f172a, #020617) !important;
        font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
        display: flex !important;
        flex-direction: column !important; 
        align-items: center !important;
        justify-content: center !important;
        min-height: 100vh !important;
        margin: 0 !important;
        padding: 0 !important;
        overflow: hidden !important; 
    }

    /* Reset EVERY admin wrapper to play nice with flex centering */
    #container,
    #main,
    #content-start,
    #content,
    .colM,
    .colMS,
    body.login #content,
    body.login .colM,
    body.login #content.colM {
        background: transparent !important;
        background-color: transparent !important;
        margin: 0 auto !important;        
        padding: 0 !important;
        width: 100% !important;
        max-width: none !important;
        min-width: 0 !important;
        border: none !important;
        box-shadow: none !important;
        float: none !important;
        clear: both !important;
        display: flex !important;      
        align-items: center !important;
        justify-content: center !important;
        flex: 1 !important;          
    }

    /* The visible card */
    .login-form-container {
        width: 100%;
        max-width: 420px;
        padding: 2.8rem 2.4rem;
        background-color: #020617 !important;
        border-radius: 16px;
        box-shadow: 0 30px 80px rgba(0,0,0,0.65);
        border: 1px solid rgba(255,255,255,0.07);
        box-sizing: border-box;
        /* Extra centering safety */
        margin: 0 auto !important;
    }

    /* Form full-width inside card */
    .login-form-container form {
        width: 100% !important;
        margin: 0 !important;
        padding: 0 !important;
    }

    .login-form-container label {
        display: block;
        margin: 0 0 0.6rem 0;
        font-size: 0.9rem;
        color: #94a3b8;
    }

    .login-form-container input[type="text"],
    .login-form-container input[type="password"] {
        width: 100% !important;
        padding: 0.9rem 1.15rem !important;
        margin-bottom: 1.4rem !important;
        border: 1px solid #1e293b !important;
        border-radius: 10px !important;
        background-color: #0f172a !important;
        color: #f8fafc !important;
        font-size: 1rem !important;
        box-sizing: border-box !important;
    }

    .login-form-container input:focus {
        outline: none !important;
        border-color: #6366f1 !important;
        box-shadow: 0 0 0 4px rgba(99,102,241,0.2) !important;
    }

    .login-form-container input[type="submit"] {
        width: 100% !important;
        padding: 1rem !important;
        margin-top: 1.2rem !important;
        background: #6366f1 !important;
        border: none !important;
        border-radius: 10px !important;
        color: white !important;
        font-size: 1.02rem !important;
        font-weight: 600 !important;
        cursor: pointer !important;
    }

    .login-form-container input[type="submit"]:hover {
        background: #4f46e5 !important;
    }

    .errornote {
        margin: 0 0 1.8rem !important;
        padding: 1.1rem !important;
        background: rgba(239,68,68,0.17) !important;
        color: #fecaca !important;
        border-radius: 10px !important;
        text-align: center !important;
        font-size: 0.93rem !important;
    }

    input:-webkit-autofill,
    input:-webkit-autofill:hover,
    input:-webkit-autofill:focus {
        -webkit-box-shadow: 0 0 0 100px #0f172a inset !important;
        box-shadow: 0 0 0 100px #0f172a inset !important;
        -webkit-text-fill-color: #f8fafc !important;
    }

    .clear { display: none !important; }

    @media (max-width: 480px) {
        .login-form-container {
            margin: 1rem !important;
            padding: 2.4rem 1.8rem;
        }
    }
</style>
{% endblock %}

{% block content_title %}{% endblock %}

{% block content %}
<div class="login-form-container">

    {% if form.errors %}
        <div class="errornote">
            Invalid username or password.
        </div>
    {% endif %}

    <form method="post" action="{{ app_path }}">
        {% csrf_token %}

        {{ form.username.label_tag }}
        {{ form.username }}

        {{ form.password.label_tag }}
        {{ form.password }}

        <input type="hidden" name="next" value="{{ next }}">

        <input type="submit" value="Sign in">
    </form>

</div>
{% endblock %}